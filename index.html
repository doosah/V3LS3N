<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>V3LS3N | Система учёта складов</title>
    <style>
        /* ========== СТИЛИ V3LS3N ========== */
        :root {
            --primary-color: #667eea;
            --primary-dark: #764ba2;
            --secondary-color: #f093fb;
            --bg-dark: #0a0e27;
            --text-primary: #f0f4ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: var(--text-primary);
            font-family: 'Inter', Arial, sans-serif;
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .header-inner {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .section {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease-in;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .warehouse-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .warehouse-btn {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3) 0%, rgba(240, 147, 251, 0.3) 100%);
            border: 1px solid rgba(135, 150, 200, 0.3);
            color: #f0f4ff;
            padding: 16px;
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .warehouse-btn:hover {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.5) 0%, rgba(240, 147, 251, 0.5) 100%);
            transform: translateY(-2px);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
            transform: translateY(-2px);
        }

        button.secondary {
            background: rgba(79, 172, 254, 0.3);
            border: 1px solid rgba(135, 150, 200, 0.3);
        }

        .large-button {
            width: 100%;
            padding: 18px 40px;
            font-size: 18px;
            margin: 10px 0;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .content {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #667eea;
            color: white;
            padding: 15px;
            border-radius: 8px;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .console-output {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: lime;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-width: 300px;
            max-height: 150px;
            overflow-y: auto;
        }

        @media (max-width: 768px) {
            .warehouse-list {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 5px;
            }
            
            .console-output {
                max-width: 200px;
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div style="text-align: center; padding: 50px; color: white;">
            <h1>🚀 V3LS3N</h1>
            <p>Инициализация системы...</p>
            <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px; display: inline-block;">
                <div id="load-status">Загрузка приложения...</div>
            </div>
        </div>
    </div>

    <script>
        // ========== V3LS3N ПРИЛОЖЕНИЕ ==========
        console.log('🚀 Инициализация V3LS3N...');

        class V3LS3NApp {
            constructor() {
                console.log('🎯 Конструктор V3LS3N App...');
                this.state = {
                    currentSection: 'main',
                    warehouses: [
                        "АРХАНГЕЛЬСК_ХАБ_НАХИМОВА",
                        "МУРМАНСК_ХАБ_ОБЪЕЗДНАЯ", 
                        "ВЕЛИКИЙ_НОВГОРОД_ХАБ_НЕХИНСКАЯ",
                        "ПЕТРОЗАВОДСК_ХАБ_ПРЯЖИНСКОЕ",
                        "ПСКОВ_ХАБ_МАРГЕЛОВА",
                        "ПСКОВ_ХАБ_НОВЫЙ",
                        "СЫКТЫВКАР_ХАБ_ЛЕСОПАРКОВАЯ",
                        "СЫКТЫВКАР_ХАБ_ОКТЯБРЬСКИЙ",
                        "ЧЕРЕПОВЕЦ_ХАБ_СТРОЙИНДУСТРИИ",
                        "ВОЛОГДА_ХАБ_БЕЛОЗЕРСКОЕ",
                        "СПБ_ХАБ_Осиновая Роща",
                        "СПБ_Хаб_Парголово",
                        "СПБ_Хаб_Парголово_Блок_3",
                        "СПБ_Хаб_Парголово_Блок_4"
                    ]
                };
                
                this.updateLoadStatus('Инициализация приложения...');
                setTimeout(() => this.initialize(), 100);
            }
            
            initialize() {
                console.log('🎯 Инициализация приложения...');
                this.updateLoadStatus('Рендер интерфейса...');
                this.renderApp();
                this.setupEventListeners();
                this.updateLoadStatus('✅ Приложение запущено!');
                console.log('✅ V3LS3N полностью загружен!');
                
                setTimeout(() => {
                    this.showNotification('V3LS3N готов к работе!', 'success');
                }, 500);
            }
            
            renderApp() {
                const appContainer = document.getElementById('app');
                if (!appContainer) {
                    console.error('❌ Контейнер app не найден');
                    return;
                }
                
                appContainer.innerHTML = \`
                    <div class="container">
                        <div class="header">
                            <div class="header-inner">
                                <div class="logo">V3LS3N</div>
                                <div class="header-text">
                                    <h1>📊 Сводные данные</h1>
                                    <div class="subtitle">Система учёта и аналитики складских операций</div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="mainSection" class="section active">
                            <h2>Выберите отчёт</h2>
                            <button class="large-button" onclick="app.selectReport('operational')">
                                📄 Операционные показатели
                            </button>
                            <button class="large-button" onclick="app.selectReport('personnel')">
                                📊 Персонал
                            </button>
                            
                            <div style="margin-top: 30px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                                <h3>📈 Статус системы</h3>
                                <p>✅ JavaScript: Работает</p>
                                <p>✅ Стили: Загружены</p>
                                <p>✅ GitHub Pages: Активно</p>
                                <p>📱 Адаптивный дизайн: Включен</p>
                            </div>
                        </div>
                        
                        <div id="warehouseReportSection" class="section">
                            <h2>📦 Отчёт по складу</h2>
                            <div class="warehouse-list" id="warehouseList"></div>
                            <div class="action-buttons">
                                <button class="secondary large-button" onclick="app.showSummarySection()">
                                    📋 Сводная таблица
                                </button>
                                <button class="secondary" onclick="app.backToMain()">
                                    ← Назад к выбору отчёта
                                </button>
                            </div>
                        </div>
                        
                        <div id="summarySection" class="section">
                            <h2>📊 Сводная таблица</h2>
                            <div class="content">
                                <h3>Данные по всем складам</h3>
                                <p>Здесь будет отображаться общая сводка по операционным показателям.</p>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                                    <div style="background: rgba(102,126,234,0.3); padding: 15px; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 24px;">14</div>
                                        <div>Складов</div>
                                    </div>
                                    <div style="background: rgba(67,233,123,0.3); padding: 15px; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 24px;">28</div>
                                        <div>Смен</div>
                                    </div>
                                    <div style="background: rgba(250,112,154,0.3); padding: 15px; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 24px;">2</div>
                                        <div>Руководителя</div>
                                    </div>
                                </div>
                                
                                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                                    <h4>🚀 Преимущества системы:</h4>
                                    <ul style="text-align: left; margin-top: 10px;">
                                        <li>Реальное время обновления данных</li>
                                        <li>Адаптивный дизайн для всех устройств</li>
                                        <li>Интеграция с Supabase</li>
                                        <li>Автоматическое резервное копирование</li>
                                    </ul>
                                </div>
                                
                                <button class="secondary" style="margin-top: 20px;" onclick="app.backToMain()">← Назад в главное меню</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="console-output">
                        <strong>Консоль V3LS3N:</strong>
                        <div id="console-messages"></div>
                    </div>
                \`;
                
                this.generateWarehouseList();
                this.log('✅ Интерфейс отрендерен');
            }
            
            generateWarehouseList() {
                const listContainer = document.getElementById('warehouseList');
                if (!listContainer) return;
                
                listContainer.innerHTML = '';
                this.state.warehouses.forEach(warehouse => {
                    const button = document.createElement('button');
                    button.className = 'warehouse-btn';
                    button.textContent = warehouse;
                    button.onclick = () => this.selectWarehouse(warehouse);
                    listContainer.appendChild(button);
                });
                
                this.log(\`📦 Загружено \${this.state.warehouses.length} складов\`);
            }
            
            selectReport(reportType) {
                this.hideAllSections();
                
                switch(reportType) {
                    case 'operational':
                        document.getElementById('warehouseReportSection').classList.add('active');
                        this.log('📄 Выбран операционный отчёт');
                        this.showNotification('Открыт операционный отчёт', 'info');
                        break;
                    case 'personnel':
                        this.showNotification('Отчёты по персоналу в разработке', 'warning');
                        this.log('👥 Выбран отчёт по персоналу (в разработке)');
                        break;
                }
            }
            
            selectWarehouse(warehouse) {
                this.log(\`📦 Выбран склад: \${warehouse}\`);
                this.showNotification(\`Открывается отчёт для: \${warehouse}\`, 'info');
                
                // Имитация загрузки данных
                setTimeout(() => {
                    this.showNotification(\`Данные по складу "\${warehouse}" загружены\`, 'success');
                }, 1000);
            }
            
            showSummarySection() {
                this.hideAllSections();
                document.getElementById('summarySection').classList.add('active');
                this.log('📊 Открыта сводная таблица');
                this.showNotification('Сводная таблица загружена', 'info');
            }
            
            backToMain() {
                this.hideAllSections();
                document.getElementById('mainSection').classList.add('active');
                this.log('🏠 Возврат в главное меню');
            }
            
            hideAllSections() {
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
            }
            
            showNotification(message, type = 'info') {
                this.log(\`🔔 Уведомление: \${message}\`);
                
                const colors = {
                    info: '#667eea',
                    success: '#43e97b', 
                    warning: '#f093fb',
                    error: '#fa709a'
                };
                
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.style.background = colors[type] || colors.info;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 3000);
            }
            
            updateLoadStatus(message) {
                const statusEl = document.getElementById('load-status');
                if (statusEl) {
                    statusEl.textContent = message;
                    statusEl.style.color = 'lime';
                }
                this.log(message);
            }
            
            log(message) {
                console.log(\`[V3LS3N] \${message}\`);
                const consoleMessages = document.getElementById('console-messages');
                if (consoleMessages) {
                    const messageElement = document.createElement('div');
                    messageElement.textContent = \`\${new Date().toLocaleTimeString()}: \${message}\`;
                    consoleMessages.appendChild(messageElement);
                    consoleMessages.scrollTop = consoleMessages.scrollHeight;
                    
                    // Ограничиваем количество сообщений
                    if (consoleMessages.children.length > 8) {
                        consoleMessages.removeChild(consoleMessages.firstChild);
                    }
                }
            }
            
            setupEventListeners() {
                // Горячие клавиши
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch(e.key) {
                            case '1':
                                e.preventDefault();
                                this.backToMain();
                                break;
                            case '2':
                                e.preventDefault();
                                this.selectReport('operational');
                                break;
                            case '3':
                                e.preventDefault();
                                this.showSummarySection();
                                break;
                        }
                    }
                });
                
                this.log('🎮 Обработчики событий установлены');
            }
        }

        // Инициализация приложения
        function initializeV3LS3N() {
            console.log('🚀 Запуск V3LS3N...');
            
            try {
                window.app = new V3LS3NApp();
                console.log('✅ V3LS3N успешно инициализирован');
            } catch (error) {
                console.error('❌ Ошибка инициализации V3LS3N:', error);
                
                // Показать ошибку пользователю
                const app = document.getElementById('app');
                if (app) {
                    app.innerHTML = \`
                        <div style="text-align: center; padding: 50px; color: white;">
                            <h1>⚠️ Ошибка загрузки V3LS3N</h1>
                            <p>\${error.message}</p>
                            <button onclick="location.reload()" style="margin-top: 20px;">🔄 Перезагрузить</button>
                        </div>
                    \`;
                }
            }
        }

        // Запуск когда DOM готов
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeV3LS3N);
        } else {
            initializeV3LS3N();
        }
    </script>
</body>
</html>
